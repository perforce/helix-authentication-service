version: '3.7'
#
# Setup to run docker containers in such a way that systemd is satisfied,
# allowing us to test our install and configure scripts properly.
#
services:
  ubuntu_22_config_test:
    build:
      context: ../..
      dockerfile: test/configure/Ubuntu22.dockerfile
    image: has-ubuntu22-config-test
    container_name: ubuntu_22_config_test
    privileged: true
    cap_add:
      - SYS_ADMIN
    security_opt:
      - seccomp:unconfined
    stop_signal: SIGRTMIN+3
    tmpfs:
      - /run
      - /run/lock
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
